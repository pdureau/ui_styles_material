{% if variant != '' and variant|lower != 'default' %}
  {% set attributes = attributes.addClass('mdc-image-list--' ~ variant|lower|replace({'_': '-'})) %}
{% endif %}

<ul{{ attributes.addClass('mdc-image-list') }}>
  {% for image in images %}
  {% set gutter_size = gutter_size|default(4) %}
  {% set column_count = column_count|default(4) %}
  <li class="mdc-image-list__item" style="width: calc(100% / {{ column_count|default(5) }}  - {{ gutter_size +  1/ column_count }}px); margin: {{ gutter_size/2 }}px;">
    {% if variant == "masonry" %}
    {{ image }}
    {% else %}
    <div class="mdc-image-list__image-aspect-container">
    {{ image }}
    </div>
    {% endif %}
    {% set index = loop.index0 %}
    {% if labels[index] %}
    <div class="mdc-image-list__supporting">
      <span class="mdc-image-list__label">{{ labels[index]  }}</span>
    </div>
    {% endif %}
  </li>
  {% endfor %}
</ul>
